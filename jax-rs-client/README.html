<html><head><title>README</title><link href="https://raw.github.com/pmuir/github-flavored-markdown/gh-pages/shared/css/documentation.css" rel="stylesheet"></link><link href="https://raw.github.com/github/github-flavored-markdown/gh-pages/shared/css/pygments.css" rel="stylesheet"></link></head><body><h1 id="toc_0">jax-rs-client: External JAX-RS Client</h1>

<p>Author: Blaine Mincey
Level: Intermediate
Technologies: JAX-RS
Summary: Demonstrates the use an external JAX-RS RestEasy client which interacts with a JAX-RS Web service that uses CDI 1.0 and JAX-RS
Prerequisites: helloworld-rs
Target Product: EAP</p>

<h2 id="toc_1">What is it?</h2>

<p>This example demonstrates an external JAX-RS RestEasy client which interacts with a JAX-RS Web service that uses <em>CDI 1.0</em> and <em>JAX-RS</em> 
in <em>JBoss Enterprise Application Platform 6</em> or <em>JBoss AS 7</em>.  </p>

<p>This client &ldquo;calls&rdquo; the HelloWorld JAX-RS Web Service that was created in the <code>helloworld-rs</code> quickstart. See the <strong>Prerequisite</strong> section below for details on how to build and deploy the <code>helloworld-rs</code> quickstart.</p>

<h2 id="toc_2">System requirements</h2>

<p>All you need to build this project is Java 6.0 (Java SDK 1.6) or better, Maven 3.0 or better.</p>

<p>The application this project produces is designed to be run on JBoss Enterprise Application Platform 6 or JBoss AS 7. </p>

<h2 id="toc_3">Configure Maven</h2>

<p>If you have not yet done so, you must <a href="../README.html#mavenconfiguration">Configure Maven</a> before testing the quickstarts.</p>

<h2 id="toc_4">Prerequisites</h2>

<p>IMPORTANT: This quickstart depends on the deployment of the &#39;helloworld-rs&#39; quickstart for its test. Before running this quickstart, see the <a href="../helloworld-rs/README.html">helloworld-rs README</a> file for details on how to deploy it.</p>

<p>You can verify the deployment of the <code>helloworld-rs</code> quickstart by accessing the following content:</p>

<ul>
<li>The <em>XML</em> content can be viewed by accessing the following URL: <a href="http://localhost:8080/jboss-as-helloworld-rs/rest/xml">http://localhost:8080/jboss-as-helloworld-rs/rest/xml</a> </li>
<li>The <em>JSON</em> content can be viewed by accessing this URL: <a href="http://localhost:8080/jboss-as-helloworld-rs/rest/json">http://localhost:8080/jboss-as-helloworld-rs/rest/json</a></li>
</ul>

<h2 id="toc_5">Run the Arquillian Tests </h2>

<p>This quickstart provides Arquillian tests. </p>

<p><em>NOTE: The following commands assume you have configured your Maven user settings. If you have not, you must include Maven setting arguments on the command line. See <a href="../README.html#arquilliantests">Run the Arquillian Tests</a> for complete instructions and additional options.</em></p>

<ol>
<li>Make sure you have started the JBoss Server as described above.</li>
<li>Make sure the <code>helloworld-rs</code> quickstart has been deployed on the server as noted in the <strong>Prerequisites</strong> section above.</li>
<li>Open a command line and navigate to the root directory of this quickstart.</li>
<li><p>Type the following command to run the test goal with the following profile activated:</p>
<div class="highlight"><pre><span class="n">mvn</span> <span class="n">clean</span> <span class="n">test</span> 
</pre>
</div></li>
</ol>

<h2 id="toc_6">Investigate the Console Output</h2>

<p>This command will compile the example and execute a test to make two separate requests to the Web Service.  Towards the end of the Maven build output, you 
should see the following if the execution is successful:</p>

<h1 id="toc_7"></h1>

<p>URL: http://localhost:8080/jboss-as-helloworld-rs/rest/xml
MediaType: application/xml</p>

<p>*** Response from Server ***</p>

<p><xml><result>Hello World!</result></xml></p>

<h1 id="toc_8"></h1>

<h1 id="toc_9"></h1>

<p>URL: http://localhost:8080/jboss-as-helloworld-rs/rest/json
MediaType: application/json</p>

<p>*** Response from Server ***</p>

<p>{&ldquo;result&rdquo;:&ldquo;Hello World!&rdquo;}</p>

<h1 id="toc_10"></h1>

<h2 id="toc_11">OpenShift</h2>

<p>To make this quickstart more interesting, deploy the RESTful service to OpenShift.  The following instructions will guide you as to the modifications that must be made to successfully execute the jax-rs-client against a service deployed to OpenShift.</p>

<h2 id="toc_12">Build and Deploy the Quickstart - to OpenShift</h2>

<p><em>IMPORTANT</em>: This quickstart depends on the deployment of the <code>helloworld-rs</code> quickstart to OpenShift for its test. Follow the instructions <a href="../helloworld-rs/README.html#openShiftInstructions">Build and Deploy the Quickstart - to OpenShift</a> in the helloworld-rs README to deploy that application to OpenShift. Do NOT yet follow the step &ldquo;Destroy the OpenShift Application&rdquo;.</p>

<p>As it says in the helloworld-rs instructions, you can verify the deployment of the <code>helloworld-rs</code> quickstart by accessing the following content. Be sure to replace the <code>quickstart</code> in the URL with your domain name.</p>

<ul>
<li><a href="http://helloworldrs-quickstart.rhcloud.com/rest/xml">http://helloworldrs-quickstart.rhcloud.com/rest/xml</a> if you want <em>xml</em> or</li>
<li><a href="http://helloworldrs-quickstart.rhcloud.com/rest/json">http://helloworldrs-quickstart.rhcloud.com/rest/json</a> if you want <em>json</em></li>
</ul>

<h3 id="toc_13">Modify the jax-rs-client quickstart pom.xml</h3>

<p>Now that you have deployed the application, it is time to make changes to the jax-rs-client quickstart Arquillian tests. </p>

<ol>
<li>Open a shell command prompt and navigate to the <code>QUICKSTART_HOME/jax-rs-client/</code> directory.</li>
<li>Make a backup copy of the <code>pom.xml</code> file.</li>
<li><p>Open the <code>pom.xml</code> file in an editor and modify the <code>xmlUrl</code> and <code>jsonUrl</code> property values as follows. Be sure to replace the <code>quickstart</code> in the URL with your domain name.</p>
<div class="highlight"><pre><span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>xmlUrl<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>http://helloworldrs-quickstart.rhcloud.com/rest/xml<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
<span class="nt">&lt;property&gt;</span>
    <span class="nt">&lt;name&gt;</span>jsonUrl<span class="nt">&lt;/name&gt;</span>
    <span class="nt">&lt;value&gt;</span>http://helloworldrs-quickstart.rhcloud.com/rest/json<span class="nt">&lt;/value&gt;</span>
<span class="nt">&lt;/property&gt;</span>
</pre>
</div></li>
</ol>

<h3 id="toc_14">Run the Maven test</h3>

<p>Type the following command to run the jax-rs-client:</p>
<div class="highlight"><pre>    <span class="n">mvn</span> <span class="n">test</span>
</pre>
</div>

<p>This command will compile the example and execute a test to make two separate requests to the Web Service.  Towards the end of the Maven build output, you should see the following if the execution is successful:</p>

<h1 id="toc_15"></h1>

<p>URL: <a href="http://helloworldrs-quickstart.rhcloud.com/rest/xml">http://helloworldrs-quickstart.rhcloud.com/rest/xml</a>
MediaType: application/xml</p>

<p>*** Response from Server ***</p>

<p><xml><result>Hello World!</result></xml></p>

<h1 id="toc_16"></h1>

<h1 id="toc_17"></h1>

<p>URL: <a href="http://helloworldrs-quickstart.rhcloud.com/rest/json">http://helloworldrs-quickstart.rhcloud.com/rest/json</a>
MediaType: application/json</p>

<p>*** Response from Server ***</p>

<p>{&ldquo;result&rdquo;:&ldquo;Hello World!&rdquo;}</p>

<h1 id="toc_18"></h1>

<p>When you are finished testing, restore the <code>pom.xml</code> file to the previous version if you want to test locally.</p>

<h3 id="toc_19">Destroy the OpenShift Application</h3>

<p>When you are finished with the application you can destroy it as follows:</p>
<div class="highlight"><pre>    <span class="n">rhc</span> <span class="n">app</span> <span class="n">destroy</span> <span class="o">-</span><span class="n">a</span> <span class="n">helloworldrs</span>
</pre>
</div>

<p><em>Note</em>: There is a limit to the number of applications you can deploy concurrently to OpenShift. If the <code>rhc app create</code> command returns an error indicating you have reached that limit, you must destroy an existing application before you continue. </p>

<ul>
<li>To view the list of your OpenShift applications, type: <code>rhc domain show</code></li>
<li>To destroy an existing application, type the following, substituting the application name you want to destroy: <code>rhc app destroy -a APPLICATION_NAME_TO_DESTROY</code></li>
</ul>
</body></html>
